package learningtest.java.awt.geom;

import java.awt.BasicStroke;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Path2D;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.WindowConstants;

import org.junit.Test;

import static org.assertj.core.api.Assertions.assertThat;

/**
 * Tests for Path2D.
 *
 * @author Johnny Lim
 */
public class Path2DTests {

	// Coordinates for Seoul
	private static double[] coordinates = {126.769791805809419,37.551391829694417,126.79575768550734,37.578810876003601,126.807590069806551,37.600897550854071,126.822514384503606,37.588043080614078,126.853028233814186,37.572824688428575,126.877966156929432,37.576801333295336,126.903966809484345,37.592274034255801,126.90303066150814,37.609977911457953,126.914554813745056,37.641500509575238,126.949403730340492,37.656145979192331,126.977339868179214,37.628586770565811,126.987011414500728,37.634450291992501,126.98174526738643,37.652097693934543,126.995060268044938,37.674827885342587,127.009999658815147,37.681904188179693,127.01802453398156,37.698275937512911,127.052250073167286,37.685101616435475,127.083875270333778,37.693595341626633,127.097063913394621,37.686383718978355,127.094407662434733,37.647134904337165,127.110140849428902,37.641850613950481,127.120124602309332,37.601784576038412,127.103554197526478,37.581015708765101,127.103257427663578,37.557225170356631,127.176071184019861,37.57678573921725,127.18408792303336,37.558142803753007,127.18116465912459,37.543841265878505,127.165309842523442,37.542218512644517,127.142086447554078,37.505789737884953,127.163494421025774,37.497445406155073,127.148575803264748,37.473813863432305,127.119572486657333,37.459362173833945,127.100324668183745,37.45598440156332,127.067781075786144,37.426197423663737,127.054245560657449,37.425749298298577,127.037518055983639,37.438362794851557,127.038817826276272,37.453820398123341,127.013162565304555,37.452579065268665,127.005523626645825,37.464451028541987,126.96520439058375,37.438249783612441,126.941529218363883,37.433151396317861,126.928095596855101,37.445670237033909,126.904876280523993,37.431299963782401,126.869850881167579,37.490972856533368,126.841542644672771,37.472898041506305,126.824193657286798,37.472951080959518,126.816497455068799,37.490455809747786,126.830547114544018,37.523902614629598,126.824233142122011,37.537880787137944,126.773244177474453,37.545912345112811,126.769791805809419,37.551391829694417};

	@Test
	public void testContains() {
		Path2D path = new Path2D.Double();
		path.moveTo(coordinates[0], coordinates[1]);
		for (int i = 2; i < coordinates.length; i += 2) {
			path.lineTo(coordinates[i], coordinates[i + 1]);
		}
		path.closePath();

		assertThat(path.contains(127.044263, 37.546375)).isTrue(); // Seoul
		assertThat(path.contains(127.1114893, 37.361446)).isFalse(); // Gyeonggi-do
	}

	public static void main(String[] args) {
		JFrame frame = new JFrame();
		frame.getContentPane().add(new TestPanel());

		frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
		frame.setSize(200, 200);
		frame.setVisible(true);
	}

	private static class TestPanel extends JPanel {

		@Override
		public void paint(Graphics g) {
			super.paint(g);

			Graphics2D g2 = (Graphics2D) g;
			g2.setStroke(new BasicStroke(1));

			Path2D path = new Path2D.Double();
			path.moveTo(
					adjustLatitudeForDrawing(coordinates[0]), adjustLongitudeForDrawing(coordinates[1]));
			for (int i = 2; i < coordinates.length; i += 2) {
				path.lineTo(
						adjustLatitudeForDrawing(coordinates[i]),
						adjustLongitudeForDrawing(coordinates[i + 1]));
			}
			path.closePath();

			g2.draw(path);
		}

		private double adjustLatitudeForDrawing(double coordinate) {
			return (coordinate - 126) * 100;
		}

		private double adjustLongitudeForDrawing(double coordinate) {
			return 200 - (coordinate - 37) * 100;
		}

	}

}
